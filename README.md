# NEZ Code Viewer — README

LLMと共に開発をしていると、しばしばコード全文をプロンプトにコピペして読ませる機会が生じます。そのコピペ作業を簡単にするための非エンジニア向けのツールです（NEZ = Non-Engineer's Zapper）。  
コード全文を“安全に・素早く”コピペするための**単一HTMLツール**です。ファイルを読み込んでプレビューし、**ファイル名つきのコードフェンス**でエディタへ連結、**一発コピー**までを1つの画面で完結させます。プログラムのファイルを添付して送信するのではなく、プロンプトの中にコードブロックで埋め込みたい人向け。

[![NEZ-Code-Viewer_Screenshot](https://github.com/user-attachments/assets/1394e184-e83c-4d16-83bf-c234a3accb7b)](https://rootport-ai.github.io/NEZ-Code-Viewer/)

## Live Demo
👉 https://rootport-ai.github.io/NEZ-Code-Viewer/

[![Open on GitHub Pages](https://img.shields.io/badge/GitHub%20Pages-Live%20Demo-blue)](https://rootport-ai.github.io/NEZ-Code-Viewer/)


---

## 特長

- **単一ファイル**：`index.html` をブラウザで開くだけ。ビルド不要・外部依存なし。
- **エンコーディング切替**：UTF-8 / UTF-8(BOM除去) / Shift_JIS
- **連結貼り付け**：  
  ` ```ファイル名 ` → 本文 → ` ``` ` の**コードフェンス**でエディタに追記
- **ワンクリックコピー**：エディタ全文をクリップボードへ

---

## 使い方

1. `index.html` をダウンロードし、ブラウザで開いてください。
2. 画面上部でエンコーディングを選び、**ファイルをドロップ**（またはクリックして選択）。
3. プレビューを確認し、**「連結」**を押すと、エディタに  
   ```
   ```<ファイル名>
   <本文>
   ```
   ```  
   の形式で追記されます。
4. **「エディタ全文をコピー」**で LLM にそのまま貼り付け。

> ヒント：プレビューをリセットしたいときは **「プレビュー消去」** を使います（エディタの内容は残ります）。

---

## 動作環境

- 最新の Chrome / Edge / Firefox / Safari を推奨
- `TextDecoder`（Shift_JIS 読み込みに使用）をサポートしない環境では、UTF-8 のみ動作

---

## 既知の仕様 / 注意点

- **概算トークン数**はヒューリスティック（粗い目安）です。厳密なトークナイザは使っていません。
- 読み込めるのは**先頭の1ファイル**です（UI上は複数選択できますが、最初の1件だけ処理）。複数ファイルを連結したい場合は、**順番に読み込んで「連結」**してください。
- 超大容量ファイル（数MB～）はブラウザの描画が重くなる可能性があります。

---

## カスタマイズのコツ

- **フェンス行の色**は CSS の `--pink-hl`（例：`#ff3ea5`）を変更してください。
- エディタの最小高さは `.editor textarea { min-height: ... }` で調整可能。
- ドロップゾーン表示の色は `.drop.dragover` を変更。

---

## 開発メモ（安全対策）

- 文字列の改行は `\r?\n` の**正規エスケープ**を徹底（コピペ時に壊れやすい）。
- D&D のイベント束ね処理は**余計な括弧やぶら下がり文**が発生しやすいため、`forEach` ブロックを**明示的に分割**。
- `white-space: pre-wrap; overflow-wrap: anywhere; word-break: break-word;` を **textarea と mirror 双方**に適用して**はみ出し防止**。
- 自動伸長は `scrollHeight` を使う `autoGrow()` で実装。縦スクロールは無効化。

---

## ライセンス

MIT License  

---

## 変更履歴

- 2025-10-24: 初期公開。D&D 構文修正／自動伸長エディタ／改行エスケープ整備／フェンス行ハイライト。

---

## 貢献

Issue / PR 大歓迎です。  
バグ報告の際は、**使用ブラウザ・再現手順・対象ファイル（可能ならサンプル）**をご共有ください。
